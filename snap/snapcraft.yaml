name: foobar2000
version: 1.3.17
summary: An experimental foobar2000 music player (wined) snap
description: |
    foobar2000 player wine 3.x as an experimental snap
    .

confinement: devmode
grade: devel
architectures: [amd64]
icon: foobar2000.png

apps:
  foobar2000:
    command: foobar2000
    desktop: usr/share/applications/foobar2000.desktop
    plugs: [ x11, unity7, home, pulseaudio, hardware-observe ]

parts:
  wine-3p1:
    plugin: dump
    source: https://dl.winehq.org/wine-builds/ubuntu/pool/main/wine-stable-i386_3.0.0~xenial_i386.deb
    source-type: deb
    install: |
      spi=$SNAPCRAFT_PART_INSTALL
      lins=$spi/usr/share/lintian
      docs=$spi/usr/share/doc
      mans=$spi/usr/share/man
      ws=opt/wine-stable
      cp -r $ws/* $spi/ && cp -r $spi/share $spi/usr/ && rm -r $spi/opt $spi/share $mans $lins $docs
    stage-packages:
      - libasound2-plugins
      - libfreetype6
      - libpng12-0
      - libncurses5
      - libgnutls30
      - libxext6
      - libudev1
      - libpulse0
      - libwrap0
      - libsystemd0
      - libasyncns0
      - libselinux1
      - liblzma5
      - libgcrypt20
      - libgpg-error0
      - libc6
      - libpcre3
      - libmpg123-0
      - libgstreamer-plugins-base1.0-0
      - zlib1g
      - fontconfig-config

  wine-3p2:
    plugin: dump
    source: https://dl.winehq.org/wine-builds/ubuntu/pool/main/wine-stable_3.0.0~xenial_i386.deb
    source-type: deb
    install: |
      spi=$SNAPCRAFT_PART_INSTALL
      docs=$spi/usr/share/doc
      mans=$spi/share/man
      ws="opt/wine-stable"
      cp -r $ws/* $spi/ && rm -r $spi/opt $docs $mans

  foobar2000:
    plugin: dump
    source: .
    prepare: ./dl_f2k
    build-packages: [wget, p7zip]

